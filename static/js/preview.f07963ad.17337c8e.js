!function(){"use strict";var e=[];window.addEventListener("error",(function(t){var n=t.message;t.filename&&(n+="\n"+t.filename.replace(window.location.origin,"")),(t.lineno||t.colno)&&(n+=":"+t.lineno+":"+t.colno);var o=!!t.error&&!!t.error.stack&&t.error.stack.toString()||"";e.push({message:n,stack:o})})),window.addEventListener("error",(function(t){var n=t.target;if(["link","video","script","img","audio"].indexOf(n.localName)>-1){var o=n.href||n.src||n.currentSrc;e.push({message:"GET <".concat(n.localName,"> error: ").concat(o),stack:""})}}),!0),window.addEventListener("unhandledrejection",(function(t){var n=t&&t.reason,o="Uncaught (in promise) ",r={message:o,stack:n};n instanceof Error&&(r={message:o,stack:{name:n.name,message:n.message,stack:n.stack}}),e.push(r)}));var t=function(e){var t=window.location.search.split("?")[1];if(t)for(var n=t.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[0]===e)return r[1]}}("url");function n(e,t,n,o){var r,i=!1,a=0;function c(){r&&clearTimeout(r)}function s(){for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];var d=this,f=Date.now()-a;function p(){a=Date.now(),n.apply(d,u)}function v(){r=void 0}i||(o&&!r&&p(),c(),void 0===o&&f>e?p():!0!==t&&(r=setTimeout(o?v:p,void 0===o?e-f:e)))}return"boolean"!==typeof t&&(o=n,n=t,t=void 0),s.cancel=function(){c(),i=!0},s}t=t?decodeURIComponent(t):"";var o=window.self!==window.top,r=!!window.opener,i=[];o||r?i.push("//e.sinaimg.cn/ssfe/liam/js/editor/popupWindowMessageManager.js"):(i.push("text!"+t),i.push("text!https://e.sinaimg.cn/ssfe/liam/js/editor/float-action-button.js")),window.liamRequire(["liam"],(function(t){window.liamRequire(i,(function(i,a){t.config({wrapText:!0});var c=function(e,t){Array.isArray(e)&&(e=e.join("-"));var n=document.querySelector(".pe-focus"),o=document.querySelector('[__loc="'+e+'"]');n&&n.classList.remove("pe-focus"),o&&(o.classList.add("pe-focus"),t&&o.scrollIntoView({block:"center",inline:"center"}))},s=n(200,(function(e){try{var n=t.toJs(e?e.trim():"");o&&!r||(n=[t.toJs(a,{text:e}),n]),t.render(n,document.querySelector("#root"))}catch(i){console.log(i)}}));if(o||r){var u=n(1e3,(function(){setTimeout((function(){0!==e.length&&(l.post({type:"preview-error",value:e}),e=[])}),0)}));window.addEventListener("error",(function(){u()})),window.addEventListener("unhandledrejection",(function(){u()}));var l=new i(r?window.opener:window.parent);l.on((function(e){e.type&&"change"===e.type&&(s(e.value),u()),e.type&&"cursor"===e.type&&c(e.value,!0)})),l.post({type:"preview-loaded"}),document.querySelector("body").addEventListener("click",(function(e){for(var t=e.target;t&&t.getAttribute&&!t.getAttribute("__loc");)t=t.parentNode;if(t&&t.getAttribute){var n=t.getAttribute("__loc");n&&(l.post({type:"preview-click",value:n}),c(n))}}))}else s(i)}))}))}();
//# sourceMappingURL=preview.f07963ad.17337c8e.js.map