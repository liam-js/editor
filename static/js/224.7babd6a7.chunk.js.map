{"version":3,"file":"static/js/224.7babd6a7.chunk.js","mappings":"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","sources":["blocks/editor/fileSaver.js","blocks/editor/header.js","blocks/editor/footer.js","blocks/editor/notice.js","blocks/editor/index.js"],"sourcesContent":["import Liam from '@liam-js/liam';\nvar FileSaver = function (options) {\n  var self = this;\n  self.options = Object.assign(\n    {},\n    {\n      on: function () {},\n    },\n    options\n  );\n  self.fileHandle = null;\n  self.File = null;\n  // 没有打开\n};\nFileSaver.prototype.open = function (cb) {\n  var self = this;\n  var on = self.options.on;\n  // https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker\n  const pickerOpts = {\n    types: [\n      {\n        description: 'liam js schema',\n        accept: {\n          'application/javascript': ['.js'],\n        },\n      },\n    ],\n    excludeAcceptAllOption: true,\n    multiple: false,\n  };\n\n  // https下才能使用\n  // 正在打开\n  try {\n    window\n      .showOpenFilePicker(pickerOpts)\n      .then(function (FileSystemFileHandles) {\n        // 打开完成\n        self.fileHandle = FileSystemFileHandles[0];\n        on.apply(self, ['showOpenFilePicker']);\n        cb && cb.call(self);\n      });\n  } catch (error) {\n    console.log('window.showOpenFilePicker 需要在 https 下打开', error);\n  }\n};\nFileSaver.prototype.saveAs = function (content, cb) {\n  var self = this;\n  var on = self.options.on;\n  // https://developer.mozilla.org/en-US/docs/Web/API/window/showSaveFilePicker\n  const pickerOpts = {\n    // excludeAcceptAllOption: false,\n    suggestedName: Liam.get('project-name').replace('.js', '') + '.js',\n    types: [\n      {\n        description: 'liam js schema',\n        accept: {\n          'application/javascript': ['.js'],\n        },\n      },\n    ],\n    excludeAcceptAllOption: true,\n    multiple: false,\n  };\n\n  if (typeof window.showSaveFilePicker == 'undefined') {\n    new Error(\n      '您的浏览器暂不支持 showSaveFilePicker，或者页面没有使用 https'\n    );\n  }\n\n  window.showSaveFilePicker(pickerOpts).then(function (FileSystemFileHandle) {\n    // 打开完成\n    self.fileHandle = FileSystemFileHandle;\n    on.apply(self, ['showSaveFilePicker']);\n    self.save(content, cb);\n  });\n};\nFileSaver.prototype.save = function (content, cb) {\n  var self = this;\n  var on = self.options.on;\n\n  var write = function () {\n    // 准备写\n\n    self.fileHandle.createWritable().then(function (writable) {\n      // 可以写\n      self.writable = writable;\n      on.apply(self, ['createWritable', writable]);\n\n      // 正在写\n      writable.write(content).then(function (msg) {\n        on.apply(self, ['write', msg]);\n        // 写完\n        writable.close().then(function (msg) {\n          on.apply(self, ['close'], msg);\n          // 关闭写\n          writable = null;\n          on.apply(self, ['save'], msg);\n          cb && cb.call(self);\n        });\n      });\n    });\n  };\n\n  // 没有有保存过，就另存\n  // console.log(self.fileHandle);\n  if (!self.fileHandle) {\n    self.saveAs(content, cb);\n  } else {\n    write();\n  }\n};\nFileSaver.prototype.set = FileSaver.prototype.save;\nFileSaver.prototype.get = function (cb) {\n  var self = this;\n  var on = self.options.on;\n  if (!self.fileHandle) {\n    cb && cb.call(undefined);\n    return;\n  }\n  self.fileHandle.getFile().then(function (File) {\n    // 获取到的文件信息\n    self.File = File;\n    on.apply(self, ['getFile', File]);\n\n    self.File.text().then(function (text) {\n      // 获取到的文件内容\n      self.text = text;\n      on.apply(self, ['text', text]);\n      cb && cb.call(self, text);\n    });\n  });\n};\n\nexport default FileSaver;","import Liam from '@liam-js/liam';\nimport localforage from 'localforage';\nimport FileSaver from './fileSaver';\n\nfunction downloadFile(fileName, content) {\n  // 定义触发事件的DOM\n  var aLink = document.createElement('a');\n  // 定义BLOB对象，声明文件内容\n  var blob = new Blob([content]);\n  // 判定平台\n  var isMac = navigator.userAgent.indexOf('Mac OS') > -1;\n  // 定义事件对象\n  var evt = document.createEvent(isMac ? 'MouseEvents' : 'HTMLEvents');\n  // 初始化事件\n  // evt.initEvent(\"click\", false, false);\n  evt[isMac ? 'initMouseEvent' : 'initEvent']('click', false, false);\n  // 定义下载文件名称\n  aLink.download = fileName;\n  // 根据上面定义的 BLOB 对象创建文件 dataURL\n  aLink.href = URL.createObjectURL(blob);\n  // 触发事件下载\n  aLink.dispatchEvent(evt);\n}\n\nfunction post(action, data, target) {\n  const body = document.getElementsByTagName('body')[0];\n  const form = document.createElement('form');\n  form.style.display = 'none';\n  const attrs = {\n    method: 'POST',\n    action: action,\n    target: target || '_blank',\n    innerHTML: (function () {\n      const html = [];\n      for (const key in data) {\n        if (Object.hasOwnProperty.call(data, key)) {\n          html.push(\n            '<textarea type=\"hidden\" name=\"' +\n              key +\n              '\" >' +\n              data[key] +\n              '</textarea>'\n          );\n        }\n      }\n      return html.join('');\n    })(),\n  };\n  for (const k in attrs) {\n    if (Object.hasOwnProperty.call(attrs, k)) {\n      form[k] = attrs[k];\n    }\n  }\n  body.appendChild(form);\n  form.submit();\n  setTimeout(function () {\n    body.removeChild(form);\n  }, 100);\n}\n\nlet project = '';\nlet projectSaved = '';\nlet store = null;\nlet hasProjectChanged = function () {\n  if (project !== projectSaved) {\n    Liam.set('project-status', 'changed');\n  } else {\n    Liam.set('project-status', 'saved');\n  }\n};\nlet saveProject = function (p, File) {\n  const name = File && File.name ? File.name : 'undefined';\n  projectSaved = p;\n  Liam.set('project-name', name);\n  Liam.set('project-status', 'saved');\n};\nlet onOpen = function () {};\nlet onTogglePreviewMode = function () {};\n\nconst getLocalforage = function (cb) {\n  if (store) {\n    cb();\n  } else {\n    store = localforage.createInstance({\n      name: 'liam-web-db',\n    });\n    cb();\n  }\n};\n\nvar FSaver = new FileSaver({\n  on: function (type, msg) {\n    //   console.log(type, msg);\n    //   info.innerHTML = type;\n  },\n});\nvar getFromLocal = function (cb) {\n  var done = function (p) {\n    project = p || project;\n    cb(project);\n  };\n  getLocalforage(function () {\n    // 本地存储一份\n    store.getItem('liam-temp-project', function (err, text) {\n      if (!err && text) {\n        done(text);\n      } else {\n        done('');\n      }\n    });\n  });\n};\nvar get = function (cb) {\n  var done = function (p, File) {\n    project = p || project;\n    // 本地存储一份\n    getLocalforage(function () {\n      store.setItem('liam-temp-project', project);\n      cb && cb(project, File);\n    });\n  };\n  // 尝试从本地文件读取\n  FSaver.get(function (text) {\n    done(text, this.File);\n  });\n};\nvar set = function (p, cb, type) {\n  // 内存存一份\n  project = p;\n\n  // 本地文件存一份\n  if (type === 'saveAs') {\n    FSaver.saveAs(project, function () {\n      cb && cb(this.fileHandle);\n    });\n  } else {\n    FSaver.set(project, function () {\n      cb && cb(this.fileHandle);\n    });\n  }\n\n  getLocalforage(function () {\n    // 本地存储一份\n    store.setItem('liam-temp-project', project);\n  });\n};\nvar open = function (fn) {\n  if (FSaver.fileHandle) {\n    if (window.confirm('您确定要打开一个新的项目吗？')) {\n      FSaver.open(function () {\n        get(fn);\n      });\n    }\n  } else {\n    FSaver.open(function () {\n      get(fn);\n    });\n  }\n};\n\nconst getAppHtml = function () {\n  return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>Liam APP</title>\n</head>\n<body>\n<div id=\"root\"></div>\n<script src=\"https://e.sinaimg.cn/ssfe/lima/js/app.js?v=1.0.5\"></script>\n<script>\n  (function(){\n    Liam.require(['liam'],function(Liam, text){\n      const js = (function(Liam, React, ReactDOM){\n        return ${project.trim()}\n      })(Liam, Liam.React, Liam.ReactDOM);\n      Liam.render(js, document.querySelector('#root'));\n    })\n  })();\n</script>\n</body>\n</html>\n  `;\n};\nconst getDemoHtml = function () {\n  return `\n  <div id=\"root\"></div>\n  <script src=\"https://e.sinaimg.cn/ssfe/lima/js/app.js?v=1.0.5\"></script>\n  <script>\n    (function(){\n      const text = ${JSON.stringify(project)};\n      Liam.require(['liam', 'text!https://e.sinaimg.cn/ssfe/lima/js/float-action-button.js?v=1.0.1'],function(Liam, floatButtonText){\n        \n          const js = [Liam.toJs(floatButtonText, {\n            text: text\n          }), Liam.toJs(text.trim())];\n          Liam.render(js, document.querySelector('#root'));\n        \n      })\n    })();\n  </script>\n  `;\n};\n\nlet previewMode = 'popup';\nconst getPreviewMode = function () {\n  if (previewMode === 'popup') {\n    previewMode = 'embed';\n  } else {\n    previewMode = 'popup';\n  }\n  return previewMode;\n};\n\n\n\nconst actions = {\n  open: function () {\n    open(function (project, File) {\n      // 第一次打开，文件肯定没有修改过的\n      saveProject(project, File);\n      onOpen(project);\n    });\n  },\n  save: function () {\n    set(project || '', function (File) {\n      saveProject(project, File);\n    });\n  },\n  saveAs: function () {\n    set(\n      project || '',\n      function (File) {\n        saveProject(project, File);\n      },\n      'saveAs'\n    );\n  },\n  generate: function () {\n    downloadFile('liam.html', getAppHtml());\n  },\n  toCodepen: function () {\n    post('https://codepen.io/pen/define', {\n      data: JSON.stringify({\n        title: 'Liam Demo',\n        description: 'Share From Liam Editor',\n        tags: ['liam', 'react', 'json'],\n        js_external: '', // 多个用分号快过年隔开\n        css_external: '', // 多个用分号快过年隔开\n        html: getDemoHtml(),\n        js: '',\n        editors: '100', // 编辑器侧栏，html/css关闭，js打开\n      }),\n    });\n  },\n};\nconst buttons = [\n  [\n    'openLocal',\n    '打开本地文件',\n    actions.open,\n  ],\n  [\n    'saveToLocal',\n    '保存',\n    actions.save,\n  ],\n  [\n    'saveToLocal',\n    '另存',\n    actions.saveAs,\n  ],\n  [\n    'generatePage',\n    '生成页面',\n    actions.generate,\n  ],\n  [\n    'shareToCodepen',\n    '分享到 Codepen',\n    actions.toCodepen,\n  ],\n  'hr',\n  [\n    'togglePreviewMode',\n    '弹出预览',\n    function () {\n      onTogglePreviewMode(getPreviewMode());\n    },\n  ],\n  'hr',\n  [\n    'disablePreview',\n    {\n      type: function(props){\n        return props.Liam_get_disable_preview\n          ? '启用实时预览'\n          : '暂停实时预览';\n      },\n      s: 'disable_preview'\n    },\n    function () {\n      Liam.set('disable_preview', !Liam.get('disable_preview'))\n      // onDisablePreview();\n    },\n  ],\n  'hr',\n  [\n    'select',\n    '选择',\n    function () {\n      Liam.trigger('component-edit', 'select');\n    },\n  ],\n  [\n    'delete',\n    '删除',\n    function () {\n      Liam.trigger('component-edit', 'delete');\n    },\n  ],\n  [\n    'copy',\n    '复制',\n    function () {\n      Liam.trigger('component-edit', 'copy');\n    },\n  ],\n  [\n    'duplicate',\n    '重复',\n    function () {\n      Liam.trigger('component-edit', 'duplicate');\n    },\n  ],\n  [\n    'insert',\n    '插入',\n    function () {\n      Liam.trigger('component-edit', 'insert');\n    },\n  ],\n  [\n    'prepend',\n    '前置',\n    function () {\n      Liam.trigger('component-edit', 'prepend');\n    },\n  ],\n  [\n    'append',\n    '后置',\n    function () {\n      Liam.trigger('component-edit', 'append');\n    },\n  ],\n  [\n    'replace',\n    '替换',\n    function () {\n      Liam.trigger('component-edit', 'replace');\n    },\n  ],\n  [\n    'toParent',\n    '父级',\n    function () {\n      Liam.trigger('component-edit', 'toParent');\n    },\n  ],\n];\n\nLiam.on('proect-actions',function(type){\n  actions[type]();\n});\n\n\nLiam.require(['//e.sinaimg.cn/ssfe/unpkg/mousetrap@1.6.5/mousetrap.min.js'],function(Mousetrap){\n\n  const shortcuts = {\n    open: 'mod+o',\n    save: 'mod+s',\n    saveAs: 'mod+shift+s',\n  };\n  for (const key in shortcuts) {\n    if (Object.hasOwnProperty.call(shortcuts, key)) {\n      const shortcut = shortcuts[key];\n      Mousetrap.bind(shortcut, function() {\n       actions[key]();\n    });\n    }\n  }\n\n});\n\n\nwindow.addEventListener('beforeunload', function (event) {\n  if (projectSaved !== project) {\n    // 显示确认对话框\n    event.preventDefault();\n    // 为了兼容处理，Chrome需要设置returnValue\n    event.returnValue = '';\n  }\n});\n\nlet firstLoad = true;\n\nconst liamJson = function (props) {\n  project = props.project;\n  onOpen = props.onOpen || function () {};\n  onTogglePreviewMode = props.onTogglePreviewMode || function () {};\n  if (firstLoad) {\n    firstLoad = false;\n    getFromLocal(function (p) {\n      projectSaved = project = p;\n      saveProject(p);\n      onOpen(p);\n    });\n\n    onTogglePreviewMode(getPreviewMode());\n  } else {\n    hasProjectChanged();\n  }\n\n  let json = [\n    {\n      type: 'a',\n      props: {\n        className: 'logo',\n      },\n      children: 'LIAM',\n    },\n  ];\n  json = json.concat(\n    buttons.map(function (item) {\n      if (item === 'hr') {\n        return {\n          type: 'span',\n          props: {\n            className: 'divider-a',\n          },\n        };\n      } else {\n        return {\n          type: 'button',\n          children: item[1],\n          props: {\n            className: 'button-a',\n            onClick: item[2],\n          },\n        };\n      }\n    })\n  );\n  return json;\n};\nexport default liamJson;\n","// import Liam from '@liam-js/liam';\nconst liamJson = function (props) {\n  let statusText = '✓';\n  let statusClass = ['status'];\n  let nameText = props.name || '未命名';\n  if(props.status === 'changed'){\n    statusText = '*';\n    statusClass.push('status-changed');\n  }else{\n    statusClass.push('status-saved');\n  }\n  return [\n    {\n      type: 'span',\n      props: {\n        className: statusClass.join(' '),\n      },\n      children: statusText,\n    },\n    {\n      type: 'span',\n      props: {\n        className: 'name',\n      },\n      children: nameText,\n    }\n  ]\n};\n\nexport default liamJson;\n","import Liam from '@liam-js/liam';\nconst liamJson = function(props){\n      let messages = props.notices.map(function(item){\n        return {\n          type: 'p',\n          children: '*'+item.message\n        }\n      });\n      if(messages.length === 0){\n        messages = '* 暂无消息';\n      }\n      return {\n        type: 'div',\n        props: {\n          className: 'liam-notice'+(props.visible?' liam-notice-show':'')\n        },\n        children: [\n          {\n            type: 'div',\n            props: {\n              className: 'liam-notice-hd',\n              onClick: function(){\n                Liam.set('project-notice-visible',false);\n              }\n            },\n            children: '消息'\n          },\n          {\n            type: 'div',\n            props: {\n              className: 'liam-notice-bd',\n            },\n            children: messages\n          }\n        ]\n      };\n    };\nexport default liamJson;\n  \n\n","import Liam from '@liam-js/liam';\n\nimport liamHeader from './header';\nimport liamFooter from './footer';\nimport liamNotice from './notice';\nimport './index.css';\n\nconst urlInstance = new URL(window.location.href);\n\nLiam.config({\n  wrapText: true,\n  componentMap: {\n    split:\n      'url#https://e.sinaimg.cn/u/8/44/944/6947227956099/react-split-pane.production.min.js',\n  },\n});\n\n// https://github.com/niksy/throttle-debounce\nfunction throttle(delay, noTrailing, callback, debounceMode) {\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  }\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  }\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n\n  function wrapper() {\n    for (\n      var _len = arguments.length, arguments_ = new Array(_len), _key = 0;\n      _key < _len;\n      _key++\n    ) {\n      arguments_[_key] = arguments[_key];\n    }\n\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n\n    if (cancelled) {\n      return;\n    }\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, arguments_);\n    }\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      exec();\n    } else if (noTrailing !== true) {\n      timeoutID = setTimeout(\n        debounceMode ? clear : exec,\n        debounceMode === undefined ? delay - elapsed : delay\n      );\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n  return wrapper;\n}\n\nvar getParam = function (key) {\n  var params = window.location.search.split('?')[1];\n  if (params) {\n    var arr = params.split('&');\n    for (var i = 0; i < arr.length; i++) {\n      var data = arr[i].split('=');\n      if (data[0] === key) {\n        return data[1];\n      }\n    }\n  }\n};\n\n// 要加载的页面 js\nlet textUrl = getParam('url');\ntextUrl = textUrl ? decodeURIComponent(textUrl) : '';\n\nwindow.requirejs.config({\n  context: 'liam',\n  paths: {\n    acorn: '//e.sinaimg.cn/ssfe/liam/js/editor/acorn',\n    acornWalk: '//e.sinaimg.cn/ssfe/unpkg/acorn-walk@8.2.0/dist/walk',\n    AstTypes:\n      '//e.sinaimg.cn/u/0/64/896/6950350070998/ast-types.production.min',\n    escodegen: '//e.sinaimg.cn/u/2/07/971/6950349895395/escodegen.browser.min',\n    vs: '//e.sinaimg.cn/ssfe/unpkg/monaco-editor@0.33.0/min/vs',\n    windowMessageManager:\n      '//e.sinaimg.cn/ssfe/liam/js/editor/windowMessageManager',\n    popupWindowMessageManager:\n      '//e.sinaimg.cn/ssfe/liam/js/editor/popupWindowMessageManager',\n  },\n});\n\nconst noop = function () {};\n// 获取页面内容，先展示在右侧预览区\nconst getContent = function (cb) {\n  cb = cb || noop;\n  if (textUrl) {\n    window.Liam.require(['windowMessageManager', 'text!' + textUrl], cb);\n  } else {\n    window.Liam.require(['windowMessageManager'], cb);\n  }\n};\n\n// 获取编辑器，把代码显示到右侧编辑\nconst getEditor = function (cb) {\n  cb = cb || noop;\n  window.Liam.require(['vs/editor/editor.main'], cb);\n};\n\n// 最后加载语法分析\nconst getAst = function (cb) {\n  cb = cb || noop;\n  window.Liam.require(['acorn', 'acornWalk', 'AstTypes', 'escodegen'], cb);\n};\n\n// 另外还作为弹窗接收信息\nconst getPopup = function (cb) {\n  cb = cb || noop;\n  window.Liam.require(['popupWindowMessageManager'], cb);\n};\n\nconsole.time('资源');\n// 提前加载\ngetContent();\ngetEditor();\ngetAst();\n\n// 获取代码信息，通过 AST 分析，得出各组件的代码位置\nconst getCodeInfo = (function () {\n  let acorn = null,\n    acornWalk = null,\n    AstTypes = null,\n    escodegen = null,\n    b = function () {};\n\n  const ready = function (cb) {\n    if (acorn) {\n      cb();\n    } else {\n      getAst(function (a, aw, A) {\n        acorn = a;\n        acornWalk = aw;\n        AstTypes = A;\n        escodegen = window.escodegen;\n        b = AstTypes.builders;\n        cb();\n      });\n    }\n  };\n\n  const _getCodeInfo = function (code) {\n    const ast = [];\n\n    // 对象属性的 key 的值，可能是标识符如 children, 也可能是字面量如 'children'\n    const getPropertyKeyName = function (property) {\n      // SpreadElement 找不到字段名\n      // 不带引号 Identifier 带引与 literal\n      if (property.key) {\n        if (property.key.type === 'Identifier') {\n          return property.key.name;\n        }\n        if (property.key.type === 'Literal') {\n          return property.key.value;\n        }\n      }\n\n      return '';\n    };\n\n    // 因为 __ast 都是数字和字符串， 只处理 prop 为数字的对象的性况，其它能转为字符串就转为字符串，否则都为 null\n    const getObjectNode = function (obj) {\n      const properties = (function () {\n        const props = [];\n        for (const key in obj) {\n          if (Object.hasOwnProperty.call(obj, key)) {\n            const element = obj[key];\n\n            const prototypeString = Object.prototype.toString.call(element);\n            let value;\n            let node;\n              \n              if (prototypeString === '[object Object]') {\n                // node 类型，不用再转换\n                if (element && element.type) {\n                  node = element;\n                } else {\n                  node = getObjectNode(element);\n                }\n              } else {\n                if (prototypeString === '[object Number]') {\n                  value = element;\n                } else {\n                  if (element && typeof element.toString === 'function') {\n                    value = element.toString();\n                  } else {\n                    value = null;\n                  }\n                }\n                node = b.literal(value);\n              }\n            \n            // 声明一个字段\n            props.push(b.property('init', b.identifier(key), node));\n          }\n        }\n        return props;\n      })();\n      return b.objectExpression(properties);\n    };\n    const wrapWithType = function (node, parentType) {\n      let isDebugNode = false;\n      const { end, start, loc, type } = node;\n      if (type === 'ObjectExpression') {\n        // 有属性\n        const properties = node.properties;\n        // 是否有children字段\n        for (let index = 0; index < properties.length; index++) {\n          const node1 = properties[index];\n          const name = getPropertyKeyName(node1);\n          if (name === '__ast') {\n            isDebugNode = true;\n            break;\n          }\n        }\n      }\n      if (isDebugNode) {\n        return node;\n      }\n      // TODO 暂时无法得知，为什么 column 会少1,可能是由于 zero-based column\n      const info = {\n        end,\n        start,\n        startLine: loc.start.line,\n        startColumn: loc.start.column + 1,\n        endLine: loc.end.line,\n        endColumn: loc.end.column + 1,\n        // parentType 用于后期对该 node 的操作，如 prepend,append,delete 等\n        parentType,\n      };\n\n      ast.push(info);\n      if (type === 'ObjectExpression') {\n        // 直接添加一个 __ast 字段即可\n        const newNode = getObjectNode({\n          __ast: info,\n        });\n        node.properties = node.properties.concat(newNode.properties);\n        return node;\n      } else {\n        // 其它情况，需要包一下\n        return getObjectNode({\n          __type: node || null,\n          __ast: info,\n        });\n      }\n    };\n\n    const getNodePosition = function (tree) {\n      // 获取 node props 字段名数组\n      const getNodePropsArray = function (properties, key) {\n        // properties 对象的属性\n        const nodePropsArray = [];\n        properties.forEach(function (node1) {\n          // 属性名\n          const name = getPropertyKeyName(node1);\n          // 属性值\n          const value = node1.value;\n          // n 和 r 有可能是数组，也有可能是字符串;\n          if ([key].indexOf(name) > -1) {\n            // 如果是数组\n            if (value.type === 'ArrayExpression') {\n              value.elements.forEach(function (item) {\n                if (item.type === 'Literal') {\n                  nodePropsArray.push(item.value);\n                }\n              });\n            } else if (value.type === 'Literal') {\n              nodePropsArray.push(value.value);\n            }\n          }\n        });\n        return nodePropsArray;\n      };\n\n      const isChildNode = function (properties) {\n        let isNode = true;\n        for (let index1 = 0; index1 < properties.length; index1++) {\n          const node1 = properties[index1];\n          // 属性名\n          const name = getPropertyKeyName(node1);\n          // 属性值\n          const value = node1.value;\n\n          if (name === 'r') {\n            // 如果是数组\n            if (value.type === 'ArrayExpression') {\n              for (let index = 0; index < value.elements.length; index++) {\n                const item = value.elements[index];\n                if (item.type === 'Literal') {\n                  if (item.value === 'children') {\n                    isNode = false;\n                    break;\n                  }\n                }\n              }\n            } else if (value.type === 'Literal') {\n              if (value.value === 'children') {\n                isNode = false;\n                break;\n              }\n            }\n          }\n        }\n        return isNode;\n      };\n      const isFunctionX = function (type) {\n        return (\n          type === 'FunctionExpression' ||\n          type === 'ArrowFunctionExpression' ||\n          type === 'ClassExpression'\n        );\n      };\n      const handleFuntionx = function (node) {\n        const type = node.type;\n        if (\n          type === 'FunctionExpression' ||\n          type === 'ArrowFunctionExpression'\n        ) {\n          // 如果是函数，则它返回的值也需要遍历\n          const functionsBodyStatements = node.body.body;\n          functionsBodyStatements.forEach(function (item) {\n            if (item.type === 'ReturnStatement') {\n              walk(item);\n            }\n          });\n        } else if (type === 'ClassExpression') {\n          // 如果是类，则它的 render 方法的返回的值也需要遍历\n          const methods = node.body.body;\n          methods.forEach(function (item) {\n            const name = item.key.name;\n            if (name === 'render') {\n              handleFuntionx(item.value);\n            }\n          });\n        }\n      };\n      // 获取每个 node 的代码位置信息\n      const getCodeWithPosition = function (node, parentType) {\n        let newNode = node;\n        const type = node.type;\n        if (type === 'ArrayExpression') {\n          // 如果是数组则要继续遍历\n          walk(node);\n        } else if (type === 'ObjectExpression') {\n          // 如果是一个对象，本身要封装，下面可能还有 children 节点，属性节点需要遍历\n          // 有属性\n          const properties = node.properties;\n          // children 是否是 node\n          const isNode = isChildNode(properties);\n\n          // 是否有children字段\n          properties.forEach(function (node1) {\n            const name = getPropertyKeyName(node1);\n            const value = node1.value;\n\n            // 有children\n            if (name === 'children' && isNode) {\n              // 如果 children 在 r 中，则不是 node，不要处理\n              walk(node1);\n            } else if (name === 'props') {\n              // props 中包含node的字段名数组\n              const nodePropsArray = getNodePropsArray(properties, 'n');\n              const renderPropsArray = getNodePropsArray(properties, 'r');\n\n              // 是否有props 字段\n              if (\n                value.type === 'ObjectExpression' &&\n                nodePropsArray.length > 0\n              ) {\n                const propProperties = value.properties;\n                propProperties.forEach(function (node2) {\n                  const name = getPropertyKeyName(node2);\n                  // 节点属性\n                  if (nodePropsArray.indexOf(name) > -1) {\n                    walk(node2);\n                  }\n\n                  // 渲染属性，函数执行后返回节点\n                  if (renderPropsArray.indexOf(name) > -1) {\n                    // 渲染属性不能调用 walk 来包装本身，包装完后就不是函数，不能调用了\n                    handleFuntionx(node2.value);\n                  }\n                });\n              }\n            } else if (name === 'type') {\n              // type 可能直接是一个组件\n              if (isFunctionX(node1.value.type)) {\n                // type 如果是组件也不能调用 walk 来包装本身，包装完后就不是组件了，不能实例化了\n                handleFuntionx(node1.value);\n              }\n            }\n          });\n\n          newNode = wrapWithType(node, parentType);\n        } else if (isFunctionX(type)) {\n          // 函数组件 类组件\n          handleFuntionx(node);\n          newNode = wrapWithType(node, parentType);\n        } else if (type === 'CallExpression') {\n          // 闭包\n          handleFuntionx(node.callee);\n          newNode = wrapWithType(node, parentType);\n        } else {\n          newNode = wrapWithType(node, parentType);\n        }\n\n        return newNode;\n      };\n\n      const walk = function (arrayOrProperty) {\n        const type = arrayOrProperty.type;\n        // node 一般挂载在数组上（有 elements 属性），或属性上（有 value 属性）\n        if (type === 'ArrayExpression') {\n          // 数组\n          const elements = arrayOrProperty.elements;\n          elements.forEach(function (node, index) {\n            elements[index] = getCodeWithPosition(node, type);\n          });\n        } else if (type === 'Property') {\n          // 属性\n          arrayOrProperty.value = getCodeWithPosition(\n            arrayOrProperty.value,\n            type\n          );\n        } else if (type === 'ReturnStatement') {\n          // 函数返回值\n          arrayOrProperty.argument = getCodeWithPosition(\n            arrayOrProperty.argument,\n            type\n          );\n        }\n      };\n\n      // 一、找出一级数组下所有元素\n      // 从根目录开始 遍历 目前默认根目录都是数组\n      if (tree && tree.body && tree.body[0] && tree.body[0].expression) {\n        // 顶级数组元素\n        const expression = tree.body[0].expression;\n        walk(expression);\n      }\n      return tree;\n    };\n    const tree = acorn.parse(code, {\n      locations: true,\n    });\n\n    // 对象：遍历所有对象，带 type 字段的对象，都加上 _ast 字段，_ast 字段包括代码位置等信息\n    acornWalk.ancestor(tree, {\n      ObjectExpression(node, ancestors) {\n        let parent = null;\n        let parentType = 'ArrayExpression';\n        const properties = node.properties;\n        let isNode = false;\n        for (let index = 0; index < properties.length; index++) {\n          const item = properties[index];\n          if (getPropertyKeyName(item) === 'type') {\n            isNode = true;\n            break;\n          }\n        }\n        if (isNode) {\n          if (ancestors.length > 1) {\n            parent = ancestors[ancestors.length - 1];\n            parentType = parent.type;\n          }\n          wrapWithType(node, parentType);\n        }\n      },\n    });\n\n    // 非对象，但是 node 节点 schema 的话，也加上 ast 信息，但都嵌套上 { __type:node,__ast:ast} 才能加上 __ast 字段\n    const newTree = getNodePosition(tree);\n\n    return {\n      code: escodegen.generate(newTree),\n      source: ast,\n    };\n  };\n\n  const getCodeInfo = function (code, callback) {\n    ready(function () {\n      callback(_getCodeInfo(code));\n    });\n  };\n  return getCodeInfo;\n})();\n\nconst Ctrl = {\n  content: '',\n  editor: null,\n  editorModel: null,\n  wm: null,\n};\n\n// 初始化容器通信\nconst initWindowMessageManager = (function () {\n  let WindowMessageManager = null;\n  const setMode = (Ctrl.setPreviewMode = function (mode) {\n    // embed popup\n    if (mode === 'popup') {\n      // Ctrl.iframe.style.display = 'none';\n      init('_blank');\n    } else {\n      // Ctrl.iframe.style.display = '';\n      init('preview-iframe');\n    }\n  });\n\n  const init = function (name) {\n    if (Ctrl.wm && Ctrl.wm.destory) {\n      Ctrl.wm.destory();\n    }\n\n    urlInstance.searchParams.set('mode', 'preview');\n    const MM1 = (Ctrl.wm = new WindowMessageManager(urlInstance.toString(), {\n      // name 指定打开弹窗的地方，可以是一个 iframe name\n      name: name,\n      newTag: name === '_blank' ? true : false,\n      placement: 'right-center',\n      crossOriginAlert: false,\n      autoFocus: false,\n    }));\n\n    Ctrl.onContentChange && Ctrl.onContentChange();\n\n    MM1.on(function (data) {\n      // 接收到预览页的点击事件\n      if (data.type && data.type === 'preview-click') {\n        // 字符串转数字\n        let value = data.value.split('-').map(function (item) {\n          return Number(item);\n        });\n        if (value.length === 4) {\n          Ctrl.selectComponent(value, true);\n        }\n      }\n      if (data.type && data.type === 'preview-error') {\n        Liam.set('project-notices', data.value);\n        if (data.value.length > 0) {\n          Liam.set('project-notice-visible', true);\n        }\n      }\n      if (data.type && data.type === 'preview-loaded') {\n        Ctrl.onContentChange && Ctrl.onContentChange();\n      }\n    });\n  };\n  return function (WM) {\n    WindowMessageManager = WM;\n    setMode('');\n    Liam.on('preview-mode', function (mode) {\n      setMode(mode);\n    });\n  };\n})();\n\n// 初始化编辑器\nconst initEditor = (function () {\n  return function (monaco, value) {\n    value = value || Ctrl.content;\n    // editor 实例参考 https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.IStandaloneCodeEditor.html\n    // customLiamLanguageTheme(monaco);\n    // 编辑器初始化\n    const editorNode = document.getElementById('editor');\n    editorNode.innerHTML = '';\n    const editor =\n      (Ctrl.editor =\n      window.editor =\n        monaco.editor.create(editorNode, {\n          // theme: 'liam-theme',\n          value: value || '',\n          language: 'javascript',\n          glyphMargin: true,\n          foldingHighlight: true,\n          unfoldOnClickAfterEndOfLine: true,\n          links: true,\n          // wordWrap: 'wordWrapColumn',\n          // wordWrapColumn: 40,\n          // wordWrapMinified: true,\n          // wrappingIndent: 'indent',\n        }));\n\n    const editorModel = (Ctrl.editorModel = editor.getModel());\n\n    // 重置宽高\n    Ctrl.editorLayout = throttle(100, function () {\n      Ctrl.editor.layout();\n    });\n\n    let currentRange = [];\n    let currentParentType = '';\n\n    // 左侧装饰条\n    let decorations = [];\n\n    // 上下空行\n    let viewZones = {};\n\n    Ctrl.selectComponent = function (range, reveal, parentType) {\n      if (range) {\n        // const centerPos = pos.start + parseInt((pos.end - pos.start) / 2);\n        if (reveal) {\n          editor.revealRangeNearTop(\n            new monaco.Range(range[0] - 3, range[1], range[2], range[3] + 3)\n          );\n        }\n\n        if (currentRange.join('-') === range.join('-')) {\n          return;\n        }\n        currentRange = range;\n        currentParentType = parentType;\n        // const range = getRangArguments(pos.start,pos.end);\n        // editor.deltaDecorations([],[]);\n        decorations = editor.deltaDecorations(decorations, [\n          {\n            range: new monaco.Range(range[0], range[1], range[2], range[2]),\n            options: {\n              isWholeLine: false,\n              className: 'liam-line-content',\n              // glyphMarginClassName: 'liam-glyph-margin',\n              // linesDecorationsClassName: 'liam-line-decoration',\n              minimap: true,\n              firstLineDecorationClassName: 'liam-first-line-decoration',\n              // inlineClassName: 'liam-inline-decoration'\n            },\n          },\n        ]);\n\n        // 前后加一个空行\n        const lines = [range[0] - 1, range[2]];\n\n        const removeViewZone = function (lines) {\n          for (const key in viewZones) {\n            if (Object.hasOwnProperty.call(viewZones, key)) {\n              const viewZoneId = viewZones[key];\n\n              if (lines.indexOf(key) === -1) {\n                editor.changeViewZones(function (changeAccessor) {\n                  changeAccessor.removeZone(viewZoneId);\n                  delete viewZones[key];\n                });\n              }\n            }\n          }\n        };\n\n        removeViewZone(lines);\n\n        lines.forEach(function (line) {\n          if (!viewZones[line]) {\n            // 空行没有则添加\n            editor.changeViewZones(function (changeAccessor) {\n              var domNode = document.createElement('div');\n              domNode.className = 'liam-viewzone';\n              viewZones[line] = changeAccessor.addZone({\n                afterLineNumber: line,\n                heightInLines: 1,\n                domNode: domNode,\n              });\n            });\n          }\n        });\n      }\n    };\n\n    /* \n      一、select/copy/repace 现在是没问题的，如果 delete 使用 null 来 replace 也是没问题的,\n      二、先通过前面有没有冒号，判断该组件是不是一个属性值，不是属性值，肯定是一个数组元素(目前已经在 ast parentType 里得出 currentParentType )\n      三、数组元素\n        - append: 先判断前面有没有逗号，没有则先加逗号，然后 copyContent+逗号即可\n        - prepend: copyContent+逗号即可\n        - delete: 判断后面有没有逗号，有则一起删除（目前只 replace 为 null ）\n        - insert: 暂不支持\n      二、属性值，append, prepend 先加上[],然后其它操作和 数组元素一致 \n      \n      */\n\n    const componentEdit = (Ctrl.componentEdit = (function () {\n      let copyContent = '';\n      const getRangeContent = function (range) {\n        range = range || currentRange;\n        return editorModel.getValueInRange(\n          new monaco.Range(range[0], range[1], range[2], range[3])\n        );\n      };\n      const select = function () {\n        editor.setSelection(\n          new monaco.Range(\n            currentRange[0],\n            currentRange[1],\n            currentRange[2],\n            currentRange[3]\n          )\n        );\n      };\n      const edit = function (range, text) {\n        editor.executeEdits('', [\n          {\n            range: new monaco.Range(range[0], range[1], range[2], range[3]),\n            text: text || copyContent,\n          },\n        ]);\n      };\n      // 目前暂用 null 来替换，不用处理 逗号问题\n      const del = function () {\n        // 先 copy，有剪切功能\n        copy();\n        edit(currentRange, \"''\");\n      };\n      const copy = function () {\n        // TODO 同时复制到粘贴板\n        copyContent = getRangeContent(currentRange);\n      };\n\n      // TODO 需要处理逗号情况\n      const append = function () {\n        if (currentParentType === 'ArrayExpression') {\n          edit(\n            [\n              currentRange[2],\n              currentRange[3],\n              currentRange[2],\n              currentRange[3],\n            ],\n            // TODO 判断前面有没有逗号，没有逗号才加逗号；目前不知道为什么逗号没有重复，可能编辑器自己修复了：）\n            ', ' + copyContent\n          );\n        } else {\n          // 替换\n          edit(\n            currentRange,\n            '[' + getRangeContent() + ', ' + copyContent + ']'\n          );\n        }\n      };\n      const duplicate = function () {\n        copy();\n        append();\n      };\n\n      const prepend = function () {\n        if (currentParentType === 'ArrayExpression') {\n          edit(\n            [\n              currentRange[0],\n              currentRange[1],\n              currentRange[0],\n              currentRange[1],\n            ],\n            copyContent + ', '\n          );\n        } else {\n          // 替换\n          edit(\n            currentRange,\n            '[' + copyContent + ', ' + getRangeContent() + ']'\n          );\n        }\n      };\n      const insert = function () {\n        alert('暂不支持添加到子节点，可手动添加 children 字段');\n      };\n      const replace = function () {\n        edit(currentRange);\n      };\n      const toParent = function () {\n        selectComponentByRange(currentRange);\n      };\n      const actions = {\n        select,\n        delete: del,\n        copy,\n        append,\n        duplicate,\n        prepend,\n        insert,\n        replace,\n        toParent,\n      };\n      return function (type) {\n        if (type !== 'select') {\n          if (currentParentType === '') {\n            alert('请选中一个组件，再进行 ' + type + ' component 操作');\n            return;\n          }\n          if (['append', 'prepend', 'insert', 'replace'].indexOf(type) !== -1) {\n            if (!copyContent) {\n              alert('请复制一个组件，再进行 ' + type + ' component 操作');\n              return;\n            }\n          }\n          if (currentRange.length === 0 || currentParentType === '') {\n            alert('请选中一个组件，再进行 ' + type + ' component 操作');\n            return;\n          }\n        }\n\n        if (\n          [\n            'select',\n            'delete',\n            'copy',\n            'append',\n            'duplicate',\n            'prepend',\n            'insert',\n            'replace',\n            'toParent',\n          ].indexOf(type) === -1 ||\n          !actions[type]\n        ) {\n          alert('暂时不支持 ' + type + ' component 操作');\n        } else {\n          actions[type]();\n          editor.focus();\n        }\n      };\n    })());\n\n    Liam.on('component-edit', function (type) {\n      componentEdit(type);\n    });\n\n    let debugcodeSource = [];\n    // const getCurrentCodeSourceByPosition = function (position) {\n    //   let currentCodeSource = {\n    //     startLine: 1,\n    //     startColumn: 0,\n    //     endLine: Infinity,\n    //     endColumn: Infinity,\n    //     parentType: '',\n    //   };\n    //   let distance = Infinity;\n    //   for (let index = 0; index < debugcodeSource.length; index++) {\n    //     const element = debugcodeSource[index];\n\n    //     if (\n    //       position.lineNumber > element.startLine - 1 &&\n    //       position.lineNumber < element.endLine + 1\n    //     ) {\n    //       let newDistance = element.endLine - element.startLine;\n\n    //       if (newDistance === 0) {\n    //         // 如果只在一行\n    //         // 那看位置在谁之间就是\n    //         if (\n    //           element.startColumn < position.column &&\n    //           element.endColumn > position.column\n    //         ) {\n    //           currentCodeSource = element;\n    //           break;\n    //         }\n    //       } else {\n    //         // 如果跨行\n    //         if (newDistance < distance) {\n    //           distance = newDistance;\n    //           currentCodeSource = element;\n    //         }\n    //       }\n    //     }\n    //   }\n\n    //   return currentCodeSource;\n    // };\n    const getParentsByRange = function (range) {\n      const parents = [];\n      for (let index = 0; index < debugcodeSource.length; index++) {\n        const element = debugcodeSource[index];\n        if (\n          element.startLine < range[0] ||\n          (element.startLine === range[0] && element.startColumn < range[1])\n        ) {\n          // 代码范围在前面\n          if (\n            element.endLine > range[2] ||\n            (element.endLine === range[2] && element.endColumn > range[3])\n          ) {\n            // 代码范围在后面\n            // 包围了，那就是它的父级或祖级\n            parents.push(element);\n          }\n        }\n      }\n      parents.sort(function (a, b) {\n        if (b.startLine === a.startLine) {\n          return b.startColumn - a.startColumn;\n        } else {\n          return b.startLine - a.startLine;\n        }\n      });\n      return parents;\n    };\n\n    const selectComponentByRange = function (range) {\n      if (range.length === 4) {\n        const parents = getParentsByRange(range);\n        const parent = parents[0];\n\n        if (parent) {\n          const codePos = [\n            parent.startLine,\n            parent.startColumn,\n            parent.endLine,\n            parent.endColumn,\n          ];\n          // console.log(cursorPath,'光标信息',index);\n\n          Ctrl.wm.post({\n            type: 'cursor',\n            value: codePos,\n          });\n          Ctrl.selectComponent(codePos, false, parent.parentType);\n        }\n      }\n    };\n\n    // 代码光标位置变化\n    const onPositionChange = throttle(500, function (pos) {\n      selectComponentByRange([\n        pos.lineNumber,\n        pos.column,\n        pos.lineNumber,\n        pos.column,\n      ]);\n    });\n\n    // 代码变化\n    const onContentChange = (Ctrl.onContentChange = throttle(200, function () {\n      const value = editor.getValue();\n      const disablePreview = Liam.get('disable_preview');\n      // getCodeInfo 第一次是异步的\n      let isReady = false;\n      getCodeInfo(value, function (info) {\n        isReady = true;\n        debugcodeSource = info.source;\n\n        if (!disablePreview) {\n          Ctrl.wm.post({\n            type: 'change',\n            value: info.code,\n          });\n        }\n\n        // 代码变化，如果有选中组件，它的位置也会变化\n        if (currentRange.length === 4) {\n          onPositionChange({\n            lineNumber: currentRange[0],\n            column: currentRange[1],\n          });\n        }\n      });\n      if (!isReady && !disablePreview) {\n        Ctrl.wm.post({\n          type: 'change',\n          value: value,\n        });\n      }\n\n      Liam.set('project', value);\n\n      Ctrl.content = value;\n    }));\n\n    onContentChange();\n    editorModel.onDidChangeContent(function () {\n      onContentChange();\n    });\n\n    editor.onDidChangeCursorPosition(function (e) {\n      onPositionChange(e.position);\n    });\n\n    (function () {\n      const shortcuts = {\n        open: monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyO,\n        save: monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyS,\n        saveAs:\n          monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyS,\n      };\n      for (const key in shortcuts) {\n        if (Object.hasOwnProperty.call(shortcuts, key)) {\n          const shortcut = shortcuts[key];\n          // 自定义全选功能，可以在代码中选中一个组件的代码\n          editor.addCommand(shortcut, function () {\n            Liam.trigger('proect-actions', key);\n          });\n        }\n      }\n    })();\n\n    // 增加右键菜单\n\n    (function () {\n      const actions = [\n        'select',\n        'delete',\n        'copy',\n        'append',\n        'duplicate',\n        'prepend',\n        'insert',\n        'replace',\n      ];\n\n      const toFirstUpperCase = function (str) {\n        return str\n          .replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (letter, index) =>\n            index === 0 ? letter.toUpperCase() : letter\n          )\n          .replace(/\\s+/g, '');\n      };\n\n      actions.forEach(function (item) {\n        editor.addAction({\n          // An unique identifier of the contributed action.\n          id: 'component-' + item,\n\n          // A label of the action that will be presented to the user.\n          label: toFirstUpperCase(item) + ' Component',\n\n          // An optional array of keybindings for the action.\n          // keybindings: [\n          //   monaco.KeyMod.CtrlCmd | monaco.KeyCode.F10,\n          //   // chord\n          //   monaco.KeyMod.chord(\n          //     monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyK,\n          //     monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyM\n          //   )\n          // ],\n\n          // A precondition for this action.\n          precondition: null,\n\n          // A rule to evaluate on top of the precondition in order to dispatch the keybindings.\n          keybindingContext: null,\n\n          contextMenuGroupId: '0_component',\n\n          contextMenuOrder: 0,\n\n          // Method that will be executed when the action is triggered.\n          // @param editor The editor instance is passed in as a convenience\n          run: function () {\n            componentEdit(item);\n          },\n        });\n      });\n    })();\n\n    // 添加代码补全\n    (function () {\n      function createLiamProposals(range) {\n        const keyWords = [\n          ['Liam', 'Liam 渲染引擎', 'Liam.'],\n          ['states', 'Liam 初始化全局状态', 'states: {${1}},'],\n          [\n            'componentMap',\n            'Liam 组件名缩写映射',\n            `componentMap: {\n\\${1:shortName}: 'url#\\${2:https://xxxxxx.com/xxx/xx/xx.js}'\n},\n          `,\n          ],\n          [\n            'getComponent',\n            'Liam 获取组件方法',\n            `getComponent: function (ctx, next) {\nconst { schema } = ctx;\nif (schema.type && schema.type === '\\${1:Demo}') {\nctx.component = \\${2:Demo};\n}\nnext();\n},\n            `,\n          ],\n          ['config', 'Liam.config 渲染引擎配置', 'Liam.config({${1}});'],\n          ['type', '组件字符串信息', \"type: '${1}',\"],\n          ['props', '组件属性对象', 'props: {${1}},'],\n          ['children', '组件字节点', 'children: ${1:[]},'],\n          ['s', '该组件依赖的全局状态名', 's: ${1:[]},'],\n          ['n', '该组件属于节点的属性名', 'n: ${1:[]},'],\n          ['r', '该组件属于渲染属性的属性名', 'r: ${1:[]},'],\n          ['__init', '组件 init 时调用', '__init: function(){${1}},'],\n          [\n            '__didMount',\n            '组件 didMount 时调用',\n            '__didMount: function(){${1}},',\n          ],\n          [\n            '__didUpdate',\n            '组件 didUpdate 时调用',\n            '__didUpdate: function(){${1}},',\n          ],\n          [\n            '__willUnmount',\n            '组件 willUnmount 时调用',\n            '__willUnmount: function(){${1}},',\n          ],\n          [\n            '__didCatch',\n            '组件 didCatch 时调用',\n            '__didCatch: function(){${1}},',\n          ],\n          [\n            'set',\n            'Liam 设置全局状态方法',\n            \"Liam.set('${1:name}', ${2:value});\",\n          ],\n          ['get', 'Liam 获取全局状态的方法', \"Liam.get('${1:name}');\"],\n          [\n            'on',\n            'Liam 监听全局事件方法',\n            \"Liam.on('${1:name}', ${2:function(data){${3}}});\",\n          ],\n          [\n            'off',\n            'Liam 删除监听全局事件方法',\n            \"Liam.off('${1:name}', ${2:event});\",\n          ],\n          [\n            'trigger',\n            'Liam 触发全局事件的方法',\n            \"Liam.trigger('${1:name}', ${2:data};\",\n          ],\n        ];\n        return keyWords.map(function (item) {\n          return {\n            label: item[0],\n            kind: monaco.languages.CompletionItemKind.Function,\n            detail: item[1],\n            insertText: item[2],\n            insertTextRules:\n              monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n            range: range,\n          };\n        });\n      }\n\n      monaco.languages.registerCompletionItemProvider('javascript', {\n        provideCompletionItems: function (model, position) {\n          // var textUntilPosition = model.getValueInRange({\n          //   startLineNumber: 1,\n          //   startColumn: 1,\n          //   endLineNumber: position.lineNumber,\n          //   endColumn: position.column\n          // });\n          // var inObject = textUntilPosition.match(\n          //   /{\\s*(\"[^\"]*\"\\s*:\\s*\"[^\"]*\"\\s*,\\s*)*([^\"]*)?$/\n          // );\n          // if (!match) {\n          //   return { suggestions: [] };\n          // }\n          var word = model.getWordUntilPosition(position);\n          var range = {\n            startLineNumber: position.lineNumber,\n            endLineNumber: position.lineNumber,\n            startColumn: word.startColumn,\n            endColumn: word.endColumn,\n          };\n\n          return {\n            suggestions: createLiamProposals(range),\n          };\n        },\n      });\n    })();\n  };\n})();\n\nlet readyCount = 0;\nconst previewReady = function () {\n  readyCount++;\n  if (readyCount < 2) {\n    return;\n  }\n  getContent(function (WindowMessageManager, content) {\n    content = content || '';\n\n    const iframe = (Ctrl.iframe = document.querySelector('#preview-iframe'));\n\n    // 初始化消息通信\n    initWindowMessageManager(WindowMessageManager);\n\n    // 不等编辑初始化，最快速度渲染页面\n    Ctrl.wm.post({\n      type: 'change',\n      data: content,\n    });\n\n    // 初始化编辑器\n    getEditor(function (monaco) {\n      initEditor(monaco, content);\n    });\n  });\n\n  //  作为弹窗接收信息\n  if (window.opener) {\n    getPopup(function (PopupWindowMessageManager) {\n      var MM2 = new PopupWindowMessageManager(window.opener);\n\n      MM2.on(function (msg) {\n        if (msg.type && msg.type === 'edit') {\n          setContent(msg.data);\n        }\n      });\n      MM2.post('popupWindowMessageManager ready');\n    });\n  }\n};\nLiam.on('preview-ready', previewReady);\n\nconst setContent = function (content) {\n  if (Ctrl.editorModel) {\n    Ctrl.editorModel.setValue(content);\n    setTimeout(function () {\n      Ctrl.onContentChange();\n    }, 0);\n  } else {\n    Ctrl.content = content;\n  }\n};\nLiam.on('file-open', setContent);\n\nLiam.on('pane-pointer-events', function (val) {\n  Ctrl.iframe.style['pointer-events'] = val;\n});\n\n// 监听尺寸变化\nLiam.on('pane-resize', function () {\n  Ctrl.editor && Ctrl.editor.layout();\n});\nwindow.addEventListener('resize', function () {\n  Ctrl.editor && Ctrl.editor.layout();\n});\n\nconst liamJson = [\n  {\n    type: 'div',\n    props: {\n      key: 'header',\n      className: 'liam-header',\n    },\n    children: {\n      type: function () {\n        return {\n          type: liamHeader,\n          props: {\n            project: Liam.get('project'),\n            onOpen: function (project) {\n              Liam.trigger('file-open', project);\n            },\n            onTogglePreviewMode: function (mode) {\n              Liam.trigger('preview-mode', mode);\n            },\n          },\n        };\n      },\n      s: 'project',\n    },\n  },\n  {\n    type: 'div',\n    props: {\n      key: 'body',\n      className: 'liam-body',\n    },\n    children: [\n      {\n        type: 'div',\n        props: {\n          key: 'body-menu',\n          className: 'liam-body-menu',\n        },\n        children: [\n          {\n            type: 'a',\n            props: {\n              className: 'item',\n              href: '',\n              onClick: function (e) {\n                let MM1 = Liam.get('component-dialog');\n                if (Liam.get('component-dialog')) {\n                  MM1.post('');\n                } else {\n                  window.Liam.require(\n                    ['windowMessageManager'],\n                    function (WindowMessageManager) {\n                      urlInstance.searchParams.set('mode', 'demos');\n                      MM1 = new WindowMessageManager(urlInstance.toString(), {\n                        name: '',\n                        newTag: false,\n                        widthRatio: 0.7,\n                        heightRatio: 0.7,\n                        placement: 'center-center',\n                        crossOriginAlert: false,\n                        autoFocus: true,\n                      });\n                      Liam.set('component-dialog', MM1);\n                      MM1.post('');\n                    }\n                  );\n                }\n                e.preventDefault();\n              },\n            },\n            children: '组件',\n          },\n        ],\n      },\n      {\n        type: 'div',\n        props: {\n          key: 'body-content',\n          className: 'liam-body-content',\n        },\n        children: {\n          type: 'split#SplitPane',\n          props: {\n            split: 'vertical',\n            minSize: 50,\n            defaultSize:\n              parseInt(localStorage.getItem('LIAM-EDITOR-SPLIT-SIZE'), 10) ||\n              '50%',\n            onChange: function (size) {\n              Liam.trigger('pane-resize', size);\n              localStorage.setItem('LIAM-EDITOR-SPLIT-SIZE', size);\n            },\n            onDragStarted: function () {\n              Liam.trigger('pane-pointer-events', 'none');\n            },\n            onDragFinished: function () {\n              Liam.trigger('pane-pointer-events', 'inherit');\n            },\n          },\n          children: [\n            {\n              type: 'div',\n              props: {\n                id: 'editor',\n                __didMount: function () {\n                  Liam.trigger('preview-ready');\n                },\n              },\n              h: '<div class=\"screen-root\"><ul><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul></div>',\n            },\n            {\n              type: 'iframe',\n              props: {\n                id: 'preview-iframe',\n                className: 'preview-iframe',\n                frameBorder: 0,\n                name: 'preview-iframe',\n                __didMount: function () {\n                  Liam.trigger('preview-ready');\n                },\n              },\n            },\n          ],\n        },\n      },\n    ],\n  },\n  {\n    type: 'div',\n    props: {\n      key: 'footer',\n      className: 'liam-footer',\n    },\n    children: [\n      {\n        type: 'span',\n        props: {\n          key: 'trigger',\n          className: 'trigger',\n          onClick: function () {\n            Liam.set(\n              'project-notice-visible',\n              !Liam.get('project-notice-visible')\n            );\n          },\n        },\n        children: {\n          type: 'svg',\n          props: {\n            style: { verticalAlign: 'middle' },\n            t: '1657877807798',\n            className: 'icon',\n            viewBox: '0 0 1024 1024',\n            version: '1.1',\n            xmlns: 'http://www.w3.org/2000/svg',\n            'p-id': '3492',\n            xlink: 'http://www.w3.org/1999/xlink',\n            width: '20',\n            height: '20',\n          },\n          children: {\n            type: 'path',\n            props: {\n              d: 'M640 832a128 128 0 0 1-255.84 6.4L384 832H192v-32a32 32 0 0 1 32-32h3.264l-1.792-352A286.592 286.592 0 0 1 480 129.76V96a32 32 0 0 1 64 0v33.76c144 15.936 256 138.016 256 286.24l-0.032 352H800a32 32 0 0 1 32 32v32h-192z m-64 0h-128a64 64 0 0 0 127.84 4.8L576 832zM512 192h-1.152a222.528 222.528 0 0 0-221.28 216l-0.096 7.68L291.264 768H736V416a224 224 0 0 0-216.32-223.872L512 192z',\n              fill: '#000000',\n              fillOpacity: '.65',\n              'p-id': '3493',\n            },\n          },\n        },\n      },\n      {\n        type: function () {\n          return {\n            type: liamFooter,\n            props: {\n              status: Liam.get('project-status'),\n              name: Liam.get('project-name'),\n            },\n          };\n        },\n        props: {\n          key: 'name',\n        },\n        s: ['project-status', 'project-name'],\n      },\n    ],\n  },\n  {\n    type: function () {\n      return {\n        type: liamNotice,\n        props: {\n          notices: Liam.get('project-notices') || [],\n          visible: Liam.get('project-notice-visible') || false,\n        },\n      };\n    },\n    s: ['project-notices', 'project-notice-visible'],\n  },\n];\n\nexport default liamJson;\n"],"names":["FileSaver","options","self","this","Object","assign","on","fileHandle","File","prototype","open","cb","window","showOpenFilePicker","types","description","accept","excludeAcceptAllOption","multiple","then","FileSystemFileHandles","apply","call","error","console","log","saveAs","content","pickerOpts","suggestedName","Liam","replace","showSaveFilePicker","Error","FileSystemFileHandle","save","createWritable","writable","write","msg","close","set","get","getFile","text","undefined","project","projectSaved","store","saveProject","p","name","onOpen","onTogglePreviewMode","getLocalforage","localforage","FSaver","type","setItem","previewMode","getPreviewMode","actions","fn","confirm","generate","fileName","aLink","document","createElement","blob","Blob","isMac","navigator","userAgent","indexOf","evt","createEvent","download","href","URL","createObjectURL","dispatchEvent","downloadFile","trim","toCodepen","action","data","target","body","getElementsByTagName","form","style","display","attrs","method","innerHTML","html","key","hasOwnProperty","push","join","k","appendChild","submit","setTimeout","removeChild","post","JSON","stringify","title","tags","js_external","css_external","js","editors","buttons","props","Liam_get_disable_preview","s","Mousetrap","shortcuts","shortcut","bind","addEventListener","event","preventDefault","returnValue","firstLoad","done","getItem","err","getFromLocal","json","className","children","concat","map","item","onClick","statusText","statusClass","nameText","status","messages","notices","message","length","visible","urlInstance","location","throttle","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","clearTimeout","wrapper","_len","arguments","arguments_","Array","_key","elapsed","Date","now","exec","clear","cancel","wrapText","componentMap","split","textUrl","params","search","arr","i","getParam","decodeURIComponent","requirejs","config","context","paths","acorn","acornWalk","AstTypes","escodegen","vs","windowMessageManager","popupWindowMessageManager","noop","getContent","require","getEditor","getAst","time","getCodeInfo","b","_getCodeInfo","code","ast","getPropertyKeyName","property","value","getObjectNode","obj","properties","element","prototypeString","toString","node","literal","identifier","objectExpression","wrapWithType","parentType","isDebugNode","end","start","loc","index","node1","info","startLine","line","startColumn","column","endLine","endColumn","newNode","__ast","__type","tree","parse","locations","ancestor","ObjectExpression","ancestors","isNode","newTree","getNodePropsArray","nodePropsArray","forEach","elements","isFunctionX","handleFuntionx","walk","getCodeWithPosition","index1","isChildNode","renderPropsArray","node2","callee","arrayOrProperty","argument","expression","getNodePosition","source","a","aw","A","builders","Ctrl","editor","editorModel","wm","initWindowMessageManager","WindowMessageManager","setMode","setPreviewMode","mode","init","destory","searchParams","MM1","newTag","placement","crossOriginAlert","autoFocus","onContentChange","Number","selectComponent","WM","initEditor","monaco","editorNode","getElementById","create","language","glyphMargin","foldingHighlight","unfoldOnClickAfterEndOfLine","links","getModel","editorLayout","layout","currentRange","currentParentType","decorations","viewZones","range","reveal","revealRangeNearTop","Range","deltaDecorations","isWholeLine","minimap","firstLineDecorationClassName","lines","viewZoneId","changeViewZones","changeAccessor","removeZone","removeViewZone","domNode","addZone","afterLineNumber","heightInLines","componentEdit","copyContent","getRangeContent","getValueInRange","edit","executeEdits","copy","append","select","setSelection","delete","duplicate","prepend","insert","alert","toParent","selectComponentByRange","focus","debugcodeSource","parents","sort","getParentsByRange","parent","codePos","onPositionChange","pos","lineNumber","getValue","disablePreview","isReady","onDidChangeContent","onDidChangeCursorPosition","e","position","KeyMod","CtrlCmd","KeyCode","KeyO","KeyS","Shift","addCommand","str","addAction","id","label","letter","toUpperCase","precondition","keybindingContext","contextMenuGroupId","contextMenuOrder","run","createLiamProposals","kind","languages","CompletionItemKind","Function","detail","insertText","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","registerCompletionItemProvider","provideCompletionItems","model","word","getWordUntilPosition","suggestions","startLineNumber","endLineNumber","readyCount","iframe","querySelector","opener","PopupWindowMessageManager","MM2","setContent","setValue","val","liamJson","liamHeader","widthRatio","heightRatio","minSize","defaultSize","parseInt","localStorage","onChange","size","onDragStarted","onDragFinished","__didMount","h","frameBorder","verticalAlign","t","viewBox","version","xmlns","xlink","width","height","d","fill","fillOpacity","liamFooter","liamNotice"],"sourceRoot":""}