{"version":3,"file":"static/js/977.7a5a4dde.chunk.js","mappings":"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","sources":["blocks/demos/index.js"],"sourcesContent":["import React from 'react';\nimport Liam from '@liam-js/liam';\nimport './index.css';\nwindow.rr1 = React;\nLiam.config({\n  states: {\n    'current-category': 'layout',\n  },\n  componentMap: {\n    mui: 'url#https://e.sinaimg.cn/ssfe/unpkg/@mui/material@5.8.3/umd/material-ui.production.min.js',\n  },\n});\nclass DemosTab extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      value: 0\n    }\n  }\n  render(){\n    const props = this.props;\n    const data = props.data;\n    const handleChange = (event, newValue) => {\n      this.setState({\n        value: newValue\n      },function(){\n        Liam.set('current-category', data.categories[newValue]);\n      });\n      \n    };\n  \n    return {\n      type: 'mui#Box',\n      props: { bgcolor: 'background.paper' },\n      children: {\n        type: 'mui#Tabs',\n        props: {\n          value: this.state.value,\n          onChange: handleChange,\n          variant: 'scrollable',\n          scrollButtons: 'auto',\n          'aria-label': '组件分类',\n        },\n        // { type: 'mui#Tab', props: { label: 'Item One' } },\n        children: data.categories.map(function (item) {\n          return { type: 'mui#Tab', props: { label: item } };\n        }),\n      },\n    };\n  }\n}\n\nclass CopyCodeButton extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      copyButton: '复制代码'\n    }\n  }\n  render(){\n    const self = this;\n    const props = this.props;\n    return {\n      type: 'url#https://e.sinaimg.cn/ssfe/unpkg/react-copy-to-clipboard/build/react-copy-to-clipboard.js#CopyToClipboard',\n      props: {\n        text: props.text,\n        onCopy: function () {\n          self.setState({\n            copyButton: '复制成功'\n          });\n          if (window.opener) {\n            window.close();\n          } else {\n            setTimeout(function () {\n              self.setState({\n                copyButton: '复制代码'\n              });\n            }, 2e3);\n          }\n        },\n      },\n      children: [\n        {\n          type: 'span',\n          children:  this.state.copyButton,\n        },\n      ],\n    };\n  }\n}\n\nconst LiamJSON = [\n\n  {\n    type: 'js',\n    props: {\n      js: function () {\n        const eventId = Liam.on('open-liam-editor', function (text) {\n          Liam.require(\n            ['//e.sinaimg.cn/ssfe/liam/js/editor/windowMessageManager.js'],\n            function (WindowMessageManager) {\n              const MM2 = new WindowMessageManager(\n                'https://dc.sina.com.cn/git/liam/sample/editor.html',\n                {\n                  name: '_blank',\n                  newTag: true,\n                  widthRatio: 1,\n                  heightRatio: 1,\n                  crossOriginAlert: false,\n                  autoFocus: true,\n                }\n              );\n              MM2.post({\n                type: 'edit',\n                data: text,\n              });\n            }\n          );\n        });\n\n        return function () {\n          Liam.offById(eventId);\n        };\n      },\n    },\n  },\n  new Promise(function(resolve){\n    import('./data').then(function(data){\n      resolve([\n        {\n          type: function () {\n            return {\n              type: 'mui#Stack',\n              props: {\n                spacing: 2,\n              },\n              children: {\n                type: 'mui#Autocomplete',\n                props: {\n                  id: 'search-input',\n                  freeSolo: true,\n                  options: data.components.map(function (item) {\n                    return item.title;\n                  }),\n                  renderInput: (params) => {\n                    return {\n                      type: 'mui#TextField',\n                      props: {\n                        ...params,\n                        label: '搜索组件',\n                      },\n                    };\n                  },\n                },\n                r: 'renderInput',\n              },\n            };\n          },\n        },\n        {\n          type: DemosTab,\n          props: {\n            data\n          }\n        },\n\n        {\n          type: function () {\n            const getIframe = function (id, text, time) {\n              text = text.replace(/`/g, '\\\\`').replace(/\\${/g,'\\\\${');\n              let srcDoc = `\n              <div id=\"root\"></div>\n              <script src=\"https://e.sinaimg.cn/ssfe/lima/js/app.js?v=1.0.6\"></script>\n              <script>\n                  liamRequire(['liam'],function(Liam){\n                    setTimeout(function(){\n                      const text = \\`${text}\\`;\n                      const js = Liam.toJs(text.trim());\n                      Liam.render(js, document.querySelector('#root'));\n                    }, 0);\n                  })\n              </script>\n              `;\n              \n              return {\n                type: 'iframe',\n                props: {\n                  id: id,\n                  frameBorder: 0,\n                  // sandbox: 'allow-same-origin allow-scripts',\n                  srcDoc,\n                  style: {\n                    transition: 'all 0.3s linear',\n                    width: '100%',\n                    // height: '200px'\n                  },\n                  __didMount: function () {\n                    const currentCategory = Liam.get('current-category');\n\n                    var iframe = document.getElementById(id);\n                    var count = 0;\n                    var lastBodyHeight = 0;\n                    var setHeight = function () {\n                      var iframeDocument = iframe.contentDocument;\n                      if(!iframeDocument){\n                        return;\n                      }\n                      var bodyHeight =\n                        iframeDocument.documentElement.offsetHeight;\n\n                        // 弹窗特殊处理\n                      if(currentCategory === 'alert'){\n                        bodyHeight = Math.max(bodyHeight, 500);\n                      }\n                      if (bodyHeight !== lastBodyHeight) {\n                        iframe.style.height = 'auto';\n                        iframe.style.height = Math.max(bodyHeight, 100) + 'px';\n                        lastBodyHeight = bodyHeight;\n                        count++;\n                        if (count < 5) {\n                          setTimeout(setHeight, count*1.5 * 500);\n                        }\n                      }\n                    };\n                    setHeight();\n                  },\n                },\n              };\n            };\n            const currentCategory = Liam.get('current-category');\n            \n\n            return data.all[currentCategory].map((_, index) => {\n\n              return {\n                type: 'require',\n                props: {\n                  deps: [\n                    'text!demos/' + currentCategory + '/' + _ + '.js',\n                  ],\n                  key: index,\n                },\n                children: function (text) {\n                  debugger;\n                  return {\n                    type: 'mui#Card',\n                    props: {\n                      sx: { minWidth: 275, margin: '10px', boxShadow: 1, overflow: 'visible' },\n                      variant: 'outlined',\n                    },\n                    children: [\n                      {\n                        type: 'mui#CardContent',\n                        children: [\n                          {\n                            type: 'mui#Typography',\n                            props: {\n                              variant: 'h5',\n                            },\n                            children: _,\n                          },\n                          getIframe('j_' + _, text),\n                        ],\n                      },\n\n                      {\n                        type: 'mui#CardActions',\n                        children: [\n                          {\n                            type: 'mui#Button',\n                            props: { size: 'small' },\n\n                            children: {\n                              type: CopyCodeButton,\n                              props: {\n                                text\n                              }\n                            },\n                          },\n                          {\n                            type: 'mui#Button',\n                            children: {\n                              type: 'span',\n                              props: {\n                                onClick: function () {\n                                  Liam.trigger('open-liam-editor', text);\n                                },\n                              },\n                              children: '编辑代码',\n                            },\n                          },\n                        ],\n                      },\n                    ],\n                  };\n                },\n                r: 'children',\n              };\n            });\n          },\n          s: 'current-category',\n        },\n      ])\n    })\n  }),\n];\nexport default LiamJSON;\n"],"names":["window","rr1","React","Liam","states","componentMap","mui","DemosTab","props","state","value","data","this","type","bgcolor","children","onChange","event","newValue","setState","categories","variant","scrollButtons","map","item","label","CopyCodeButton","copyButton","self","text","onCopy","opener","close","setTimeout","js","eventId","WindowMessageManager","name","newTag","widthRatio","heightRatio","crossOriginAlert","autoFocus","post","Promise","resolve","then","spacing","id","freeSolo","options","components","title","renderInput","params","r","getIframe","time","replace","srcDoc","frameBorder","style","transition","width","__didMount","currentCategory","iframe","document","getElementById","count","lastBodyHeight","setHeight","iframeDocument","contentDocument","bodyHeight","documentElement","offsetHeight","Math","max","height","all","_","index","deps","key","sx","minWidth","margin","boxShadow","overflow","size","onClick","s"],"sourceRoot":""}